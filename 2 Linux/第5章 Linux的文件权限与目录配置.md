# 第5章 Linux的文件权限与目录配置

## 用户与用户组

文件拥有者：可以设置文件的权限

用户组：用户分组，可以将一个计算机内的用户分为几个团队进行管理。每个账号可以有多个用户组的支持。（共享客厅、自己的卧室）

在Linux里，每个文件都具有用户、所属群组和其他人三种身份的个别权限。

## 文件权限

```bash
root@VMxxxx-xxxx:~# ls -al
总用量 56
drwx------  7 root root  4096 9月   6 18:09 .
drwxr-xr-x 25 root root  4096 9月   6 19:50 ..
drwxr-xr-x  2 root root  4096 3月  22 21:18 模板
drwxr-xr-x  2 root root  4096 3月  22 21:18 桌面
-rw-------  1 root root  1655 9月   6 20:08 .bash_history
-rw-r--r--  1 root root  3770 10月  2  2021 .bashrc
drwx------  3 root root  4096 4月  13 19:34 .cache
drwx------  3 root root  4096 9月   6  2020 .config
-rw-r--r--  1 root root   877 9月   5  2020 .profile
-rw-------  1 root root 11806 9月   6 18:09 .viminfo
drwxr-xr-x  2 root root  4096 9月   6 13:21 .vscode
-rw-r--r--  1 root root   165 4月  30 10:32 .wget-hsts
```

格式为：\[权限]\[链接]\[拥有者]\[用户组]\[文件容量]\[修改日期]\[文件名]

其中文件权限：

- 第一个字符代表文件是目录、文件等。
  - `[d]` 目录
  - `[-]` 文件
  - `[l]` 链接文件
  - `[b]` 设备文件中可按块随机读写的设备
  - `[c]` 串口设备，比如鼠标键盘等一次性读写设备
- 接下来的字符三个为一组，均为`[rwx]`的组合。`[r]`代表可读、`[w]`代表可写、`[x]`代表可执行。没有权限就显示`-`号。
  - 第一组为文件拥有者
  - 第二组为加入此用户组账号的权限
  - 第三组为非本人且没有加入本用户组的其他账号的权限

## 修改文件属性和权限

### chrgp：修改文件所属用户组

格式：`chgrp [-R] dirname`，其中`-R`表示递归。

### chowm：修改文件拥有者

格式：`chown [-R] 账号名称 dirname`，其实还可以顺便改了用户组，格式为`账号名称:用户组名称`。

### chmod：修改文件权限

格式：`chmod [-R] xyz dirname`，xyz表示拥有者、用户组、其他人的权限，4为r、2为w、1为x权限。

## 权限对目录的重要性

- r权限可以查看目录内容但无法进入目录。（当目录不属于用户本身时，查看文件名一堆问号）
- w可以修改目录结构，在目录中新建目录和文件。删除目录内文件或目录时不用管其权限是什么。
- x代表用户可否进入该目录成为工作目录。

注：

- 没有r权限没法读取目录（摸黑），不能列出目录下文件，但是可以进去，tab无法补全文件名，如果自己知道则可以编辑。
- 读取目录内文件至少需要rx权限。

## Linux的设备种类与扩展名

### 常规文件

属性以`-`开头。

- 纯文本文件
- 二进制文件
- 数据文件（比如`/var/log/wtmp`，只有特定指令能读取）

### 目录

`d`开头。

### 链接文件

类似于win的快捷方式，第一个属性为`l`格式。

### 设备与设备文件

- 区块设备文件：随机读取接口设备，比如硬盘，属性为`b`
- 字符设备文件：即一些串口设备，比如键盘鼠标等，属性为`c`

### 数据接口文件

一般用于网络上的数据交换，第一个属性为`s`，最长在`/run`或`/tmp`中看到。

### 数据输送文件

主要解决多个程序同时读写一个文件造成的错误问题，属性为`p`开头。

Linux的文件能否被执行与扩展名无关，与属性x有关。

## Linux的目录配置依据：FHS
