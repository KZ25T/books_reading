# 第7章 Linux磁盘与文件系统管理

操作系统的文件除了实际内容，还有文件权限和属性等信息。Linux议案会放在不同区块，数据在数据区块，权限等在inode中。还有超级区块记录整个文件系统的整体信息，包括inode和数据区块的总量、剩余量、使用量等。

U盘的文件系统一般为FAT格式，并没有inode的存在，读取完整个区块之后才能读取下一个，容易造成碎片，需要及时进行碎片清理。

## ext2文件系统

ext2文件系统格式化的时候基本上是区分为多个区块群组，每个区块群组都有独立的inode、数据区块、超级区块系统。

inode区块记录了文件权限、属性，有12个直接、1个间接、1个双间接、1个三间接数据。因此但以文件最大大小为：12+256+256\*256+256\*256\*256(K)=16GB

超级区块记录数据除了包括上面所属，还有文件系统挂载时间、最近一次写入数据的时间、最近一次校验磁盘的信息，以及有效位（未挂载为1）等。

日志式文件系统：为了避免不一致现象发生，所以在文件系统中规划一个区块，专门记录写入或修改文件的步骤，可以简化一致性检查。

## 文件系统的运行

读写文件时会放入内存，过段时间会将`Dirty`文件写回存储。

## 挂载点的意义

挂载点是一个目录，是进入这个文件系统的入口。

## 其他Linux支持的文件系统与VFS

常见支持的文件系统：

- 传统文件系统：`ext2`、`minix`、`FAT`、`iso9660`等
- 日志式文件系统：`ext3`、`ext4`、`NTFS`等
- 网络文件系统：`NFS`、`SMBFS`

VFS系统：
