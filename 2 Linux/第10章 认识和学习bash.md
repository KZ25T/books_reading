# 第10章 认识和学习bash

## 变量

环境变量：`PATH`、`HOME`、`MAIL`、`SHELL`等。一般自定义变量用小写来表示。

使用环境变量的值一般为：`$变量`或`${变量}`

定义或使用某个变量的方法：等号连接（右边有空格的可以用引号连接起来）

双引号内的`$`字符可以保持原有的特性，单引号内的字符保持原有字符。

其他：

- 需要使用其他命令执行的，可以用反单引号或$(命令)：
  
  ```bash
  ➜  ~ mytest="test $(uname -r )"
  ➜  ~ echo $mytest
  test 5.15.39-1-pve
  ```

- 扩增变量内容：用`${变量}`或`"$变量名称"`表示。
- 取消变量为`unset 变量名`
- 使用ramdom获得0-9的数值
  
  ```bash
  ➜  ~ declare -i number=$RANDOM*10/32768; echo $number
  4
  ```

## 重要的变量

- `PS1` 提示字符的设置
- `$` 本shell的PID
- `?` 上一个命令的返回值
- `OSTYPE`，`HOSTTIPE`，`MACHTYPE` 表示主机硬件和内核的等级

`export`可以将自定义变量转为环境变量，可以被子进程所继承。

## 读入变量

`read -[pt] variable`读入内容存入变量`variable`中。

- `-p`后接提示字符
- `-t`后接等待时间

`declare`和`typeset`是一样的功能，就是声明变量的类型。

- `declare -[aixr] variable`
  - 其中a为数组（下标从1开始）
  - i为整数
  - x和export一样是定义为环境变量
  - r定义为read-only且不可unset
  - `-`改成`+`可以减去这个属性

另：ulimit命令可以对用户作出限制。

## 变量的替换

- `${变量/旧字符串/新字符串}`替换第一个
- `${变量//旧字符串/新字符串}`全部替换

## 334
